name: nodejs
version: 0.0.4
inherits: wercker/ubuntu12.04-nodejs0.10@1.0.2
type: service
platform: ubuntu@12.04
description: wercker box with other usefull services
keyword:
  - postgres
  - nodejs
  - node
  - redis
  - pg
packages:
  - node@10.x
script: |

  sudo apt-get update

  # phantomjs
  wget https://phantomjs.googlecode.com/files/phantomjs-1.9.2-linux-x86_64.tar.bz2
  tar xfj phantomjs-1.9.2-linux-x86_64.tar.bz2
  sudo cp phantomjs-1.9.2-linux-x86_64/bin/phantomjs /usr/local/bin

  # node dependecies
  sudo npm install -g grunt-cli
  sudo npm install -g mocha

  sudo apt-get install -y redis-server xvfb postgresql postgresql-server-dev-all firefox
env:
  NODE_ENV: test
